<!DOCTYPE html>
<html lang="en">

<head>
  <title>Local Storage Demo</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
    integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

  <!-- Stylesheets -->
  <link type="text/css" rel="stylesheet" href="styles/main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">

  <!-- - - -  Fonts - - - -->
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,900" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=PT+Mono&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@100;300;400;500;600;700&display=swap"
    rel="stylesheet">

  <!-- Scripts -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bowser@2.9.0/es5.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/rikkokiri/localstorage-script@0.1/script.js"></script>
  <script>
    // Prevent (in very rudimentary and non-secure way) non-logged in users from accessing this page
    if (localStorage.getItem('email') === null || localStorage.getItem('firstName') === '') {
      console.log('Not logged in!')
      try {
        window.stop();
      } catch (e) {
        //IE stop loading content 
        document.execCommand('Stop');
      }
      window.location.replace('index.html');
    }
  </script>
  <script>
    $(document).ready(function () {
      getConsoleLog();
    });
  </script>
</head>

<body>
  <!-- Use Bootstrap to structure the page -->
  <nav class="navbar navbar-expand-md">
    <div class="container-fluid">
      <a href="index.html" class="navbar-brand">Local Storage Demo</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar7">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="navbar-collapse collapse justify-content-stretch" id="navbar7">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="info.html">Info</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/Rikkokiri/localstorage" target="_blank" title="View source on Github">
                <i class="fab fa-github"></i>
            </a>
        </li>
        </ul>
      </div>
    </div>
  </nav>
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-12 col-md-11 offset-md-1">
        <h1>WWW Applications: Local Storage Demo</h1>
      </div>
      <div class="col-sm-12 col-md-4 offset-md-1">
        <div class="consolePrint">
          <h2>LocalStorage</h2>
          <hr>
          <table id="consoleTable" width="100%">
            <tbody>
              <tr>
                <th>Key</th>
                <th>Value</th>
              </tr>
            </tbody>
          </table>
          <pre id="results"></pre>
          <p><tt id="strResults" style="max-width: 100%;"></tt></p>
        </div>
      </div>
      <div class="col-sm-12 col-md-7">
        <main class="centered">
          <h2 id="greeting">Hello stranger!</h2>
          <details id="hidable-form">
            <summary>Wrong first name? Reintroduce yourself!</summary>
            <form id="userInfFirstName">
              <label for="firstName">What is your first name?</label> <br>
              <input name="firstName" id="fName" type="text" size="30"> <br>

              <button type="submit">Submit</button>
            </form>
          </details>
          <details id="hidable-form">
            <summary>Wrong last name? Reintroduce yourself!</summary>
            <form id="userInfLastName">
              <label for="lastName">What is your last name?</label> <br>
              <input name="lastName" id="lName" type="text" size="30"> <br>

              <button type="submit">Submit</button>
            </form>
          </details>
          <details id="hidable-form">
            <summary>Wrong email address? Tell us your email!</summary>
            <form id="userInfNewEmail">
              <label for="newEmail">What is your new email?</label> <br>
              <input name="newEmail" id="newEmail" type="text" size="30"> <br>

              <button type="submit">Submit</button>
            </form>
          </details>
          <details id="hidable-form">
            <summary>Do you want to change your password? </summary>
            <form id="userInfNewPassword">
              <label for="newPassword">What is your new password?</label> <br>
              <input name="newPassword" id="newPass" type="text" size="30"> <br>

              <button type="submit">Submit</button>
            </form>
          </details>
          <!--
          <button id="clear" style="padding: 15px 40px;">Clear local storage</button><br>
          <button id="showJsonFormat" style="padding: 15px 70px;">Convert to Json Format</button>
          <button id="showSerialiseFormat" style="padding: 15px 70px;">Convert to URL-encoded Notation</button>
          -->
        </main>
      </div>
      <div class="col-sm-12 button-row">
        <button id="clear" style="padding: 15px 40px;">Clear local storage</button>
        <button id="showJsonFormat" style="padding: 15px 70px;">Convert to Json Format</button>
        <button id="showSerialiseFormat" style="padding: 15px 70px;">Convert to URL-encoded Notation</button>
      </div>
    </div>
  </div>

  <!-- Bootstrap Bundle (includes Popper) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous">
  </script>
</body>

</html>